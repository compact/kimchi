<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: kimchi.pointerlock.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: kimchi.pointerlock.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * Pointer lock state (not controls, which are handled by three.controls.js).
 * @namespace pointerLock
 * @memberOf  module:KIMCHI
 */
var KIMCHI = (function (KIMCHI) {
  'use strict';

  var pointerLock = {}, requestPointerLock;
  KIMCHI.pointerLock = pointerLock;



  /**
   * Request pointer lock from the browser. This is called whenever the user
   *   enters free flight mode.
   * @memberOf module:KIMCHI.pointerLock
   */
  pointerLock.request = function () {
    requestPointerLock.call(document.body);
    console.log('pointer lock requested');
  };

  /**
   * Has to be called once, before any pointer lock requests.
   * @memberOf module:KIMCHI.pointerLock
   */
  pointerLock.init = function () {
    var havePointerLock, body, change, error;

    // check whether pointer lock is enabled
    havePointerLock = 'pointerLockElement' in document ||
      'mozPointerLockElement' in document ||
      'webkitPointerLockElement' in document;
    if (!havePointerLock) {
      // TODO we can use FirstPersonControls here instead
      KIMCHI.ui.notice.set(KIMCHI.config.get('notices-pointer-lock-not-supported'));
      return;
    }

    body = document.body;

    /**
     * The browser's requestPointerLock function, used in request().
     * @private
     * @memberOf module:KIMCHI.pointerLock
     */
    requestPointerLock = body.requestPointerLock ||
      body.mozRequestPointerLock || body.webkitRequestPointerLock;

    // bind pointer lock change and error handlers
    change = function (event) {
      var on = document.pointerLockElement === body ||
        document.mozPointerLockElement === body ||
        document.webkitPointerLockElement === body;

      if (on) {
        KIMCHI.flight.setMode('free');
      } else if (KIMCHI.flight.getMode() === 'free') {
        KIMCHI.flight.setMode('menu');
      }
    };
    document.addEventListener('pointerlockchange', change, false);
    document.addEventListener('mozpointerlockchange', change, false);
    document.addEventListener('webkitpointerlockchange', change, false);

    error = function (event) {
      console.log('pointerlockerror:');
      console.log(event);
    };
    document.addEventListener('pointerlockerror', error, false);
    document.addEventListener('mozpointerlockerror', error, false);
    document.addEventListener('webkitpointerlockerror', error, false);
  };



  return KIMCHI;
}(KIMCHI || {}));</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-KIMCHI.html">KIMCHI</a></li></ul><h3>Externals</h3><ul><li><a href="external-THREE.html">THREE</a></li></ul><h3>Classes</h3><ul><li><a href="Body.html">Body</a></li><li><a href="external-THREE.Curve.html">Curve</a></li><li><a href="external-THREE.Matrix3.html">Matrix3</a></li><li><a href="external-THREE.Object3D.html">Object3D</a></li><li><a href="external-THREE.PerspectiveCamera.html">PerspectiveCamera</a></li><li><a href="external-THREE.Vector3.html">Vector3</a></li><li><a href="Mode.html">Mode</a></li><li><a href="THREE.Controls.html">Controls</a></li><li><a href="THREE.Stars.html">Stars</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-KIMCHI.config.html">config</a></li><li><a href="module-KIMCHI.flight.html">flight</a></li><li><a href="module-KIMCHI.flight.modes.html">modes</a></li><li><a href="module-KIMCHI.flight.modes.auto.html">auto</a></li><li><a href="module-KIMCHI.flight.modes.free.html">free</a></li><li><a href="module-KIMCHI.flight.modes.menu.html">menu</a></li><li><a href="module-KIMCHI.format.html">format</a></li><li><a href="module-KIMCHI.pointerLock.html">pointerLock</a></li><li><a href="module-KIMCHI.renderer.html">renderer</a></li><li><a href="module-KIMCHI.size.html">size</a></li><li><a href="module-KIMCHI.space.html">space</a></li><li><a href="module-KIMCHI.time.html">time</a></li><li><a href="module-KIMCHI.ui.html">ui</a></li><li><a href="module-KIMCHI.ui.hud.html">hud</a></li><li><a href="module-KIMCHI.ui.notice.html">notice</a></li><li><a href="module-KIMCHI.ui.panel.html">panel</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Thu Sep 26 2013 01:19:51 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
